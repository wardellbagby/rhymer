(self.webpackChunklyricistant=self.webpackChunklyricistant||[]).push([[594,522],{1522:(e,t,r)=>{"use strict";r.r(t),r.d(t,{APP_AUTHOR:()=>o,APP_HOMEPAGE:()=>n,APP_VERSION:()=>a,logger:()=>l,platformDelegate:()=>i});const[a,n,o]=["1.2.5-nightly+feee020\n","https://github.com/wardellbagby/lyricistant","Wardell Bagby"],l=window.logger,i=window.platformDelegate},1594:(e,t,r)=>{"use strict";r.r(t);var a=r(7577),n=r(7294),o=r(3935),l=r(3727),i=r(5800),c=r(4874),s=r(7921),m=r(1522),d=r(529),u=r(282),p=r(8623),f=r(6083),g=r(1749),h=r(2318),y=r(1120),E=r(8407),b=r(4186),v=r(2074),x=r(1177);const w="https://github.com/wardellbagby/lyricistant/releases/latest/download/",k=[{platform:"Mac",asset:"lyricistant-mac_x64.dmg"},{platform:"Windows",asset:"lyricistant-win.exe"},{platform:"Linux",asset:"lyricistant-linux_x86_64.AppImage",arch:"x64"},{platform:"Linux",asset:"lyricistant-linux_i386.AppImage",arch:"i386"},{platform:"Linux",asset:"lyricistant-linux_armv7l.AppImage",arch:"armv7l"},{platform:"Linux",asset:"lyricistant-linux_arm64.AppImage",arch:"arm64"}],Z=({platform:e})=>{switch(e){case"Linux":return"#98ff98";case"Mac":return"#A3AAAE";case"Ubuntu":return"#E95420";case"Windows":return"#00A4EF"}},C=({platform:e})=>{switch(e){case"Linux":case"Mac":return"#000000";case"Ubuntu":return"#FFFFFF";case"Windows":return"#000000"}},S=e=>{var t;const{release:r,onClick:a}=e,o=(e=>(0,y.Z)((()=>({root:{background:Z(e),color:C(e)}})))())(r);return n.createElement(d.Z,{padding:"8px"},n.createElement(u.Z,{className:o.root,variant:"contained",fullWidth:!0,startIcon:n.createElement(L,{release:r}),size:"large",onClick:a},null!==(t=r.arch)&&void 0!==t?t:"Download"))},D=()=>{const e=(0,s.k6)(),t=()=>e.replace("/"),r=(0,n.useMemo)((()=>k.reduce(((e,t)=>{var r;const a=null!==(r=e.get(t.platform))&&void 0!==r?r:[];return e.set(t.platform,[...a,t]),e}),new Map)),[]);return n.createElement(p.Z,{onClose:t,"aria-labelledby":"choose-download-dialog-title",open:!0},n.createElement(f.Z,{id:"choose-download-dialog-title"},"Download Lyricistant"),n.createElement(d.Z,{paddingLeft:"16px",paddingRight:"16px",paddingBottom:"32px"},n.createElement(g.Z,{container:!0,spacing:4,alignItems:"center",justify:"center"},[...r.keys()].map((e=>n.createElement(g.Z,{container:!0,item:!0,alignItems:"center",justify:"center",key:e},n.createElement(g.Z,{item:!0,xs:12},n.createElement(h.Z,{align:"center",variant:"h6"},e)),r.get(e).map(((e,r,a)=>n.createElement(g.Z,{key:e.asset,item:!0,xs:1===a.length?8:6},n.createElement(S,{release:e,onClick:()=>{var r;r=w+e.asset,m.logger.info(`App download link clicked. Chosen URL: ${r}`),window.open(r,"_blank"),t()}}))))))))),n.createElement(u.Z,{size:"large",variant:"contained",fullWidth:!0,onClick:t},"Close"))},L=e=>{const{platform:t}=e.release;switch(t){case"Linux":return n.createElement(E.Z,null);case"Mac":return n.createElement(b.Z,null);case"Ubuntu":return n.createElement(v.Z,null);case"Windows":return n.createElement(x.Z,null)}};var T=r(9525),R=r(7212),O=r(6856),W=r(3681);const A=(e,t,r)=>{(0,n.useEffect)((()=>(m.platformDelegate.on(e,t),()=>m.platformDelegate.removeListener(e,t))),null!=r?r:[])};function N(){const[e,t]=(0,n.useState)(null),r=(0,n.useCallback)((r=>{t(null),m.platformDelegate.send("dialog-button-clicked",e.tag,r)}),[e]);return A("show-dialog",t,[t]),e?n.createElement(p.Z,{open:!0},n.createElement(f.Z,null,e.title),n.createElement(T.Z,null,e.message&&n.createElement(R.Z,null,e.message),e.progress&&n.createElement(P,{value:e.progress})),e.buttons&&n.createElement(O.Z,null,e.buttons.map((e=>n.createElement(u.Z,{key:e,onClick:()=>r(e),color:"primary"},e))))):n.createElement("div",null)}const P=e=>n.createElement(d.Z,{display:"flex",alignItems:"center",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"8px",paddingRight:"8px"},n.createElement(d.Z,{width:"100%",mr:1},n.createElement(W.Z,Object.assign({variant:"determinate"},e))),n.createElement(d.Z,{minWidth:35},n.createElement(h.Z,{variant:"body2",color:"textSecondary"},`${Math.round(e.value)}%`)));var M=r(7416),j=r(2285),_=r(5517),F=r(4436),I=r(3700),B=r(6817),z=r(5639),$=r(3832),U=r(9895),q=r(5258),G=r(7812),H=r(7623),X=r(8358),Q=r(89),Y=r(366),J=r(3375),V=r(9233),K=r(1931);const ee=new V.X(null),te={preferences:e=>ee.pipe((0,K.x)()).subscribe(e),onPreferences:e=>ee.next(e)},re=(0,n.createContext)(te),ae=({children:e})=>(A("prefs-updated",te.onPreferences),n.createElement(re.Provider,{value:te},e)),ne=()=>{const e=(0,n.useContext)(re),[t,r]=(0,n.useState)();return(0,n.useEffect)((()=>{const t=e.preferences(r);return()=>t.unsubscribe()}),[e,r]),t},oe=n.forwardRef((function(e,t){return n.createElement(j.Z,Object.assign({direction:"up",ref:t},e))}));oe.displayName="DialogTransition";const le=(0,y.Z)((e=>(0,H.Z)({title:{marginLeft:e.spacing(2),flex:1},root:{color:e.palette.primary.contrastText},container:{height:"100%"},divider:{marginTop:"2px"},dialogPaper:{background:e.palette.background.default},paper:{height:"100%",paddingTop:"32px",paddingBottom:"32px",paddingLeft:"32px",paddingRight:"32px"},appBar:{paddingTop:"env(safe-area-inset-top)",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},header:{fontWeight:"bolder"},select:{marginLeft:"16px",marginRight:"16px"}}))),ie=({label:e})=>{const t=le(void 0);return n.createElement(n.Fragment,null,n.createElement(h.Z,{className:t.header,variant:"h6"},e),n.createElement(_.Z,{className:t.divider}))},ce=({value:e,onChange:t,items:r,label:a})=>{const o=le(void 0);return n.createElement(F.Z,{variant:"outlined",fullWidth:!0},n.createElement(I.Z,{className:o.select},a),n.createElement(B.Z,{className:o.select,value:e,onChange:e=>t(e.target.value),label:a},r.map((({label:e,value:t})=>n.createElement(z.Z,{value:t},e)))))},se=()=>{const e=(0,s.k6)(),t=le(void 0),r=ne(),[a,o]=(0,n.useState)(r);return(0,n.useEffect)((()=>{o(r)}),[r]),a?n.createElement(p.Z,{fullScreen:!0,className:t.root,open:!0,TransitionComponent:oe,PaperProps:{className:t.dialogPaper}},n.createElement(q.Z,{color:"primary",className:t.appBar,position:"sticky"},n.createElement(X.Z,null,n.createElement(G.Z,{color:"inherit",edge:"start",onClick:()=>e.replace("/")},n.createElement(Y.Z,null)),n.createElement(h.Z,{variant:"h6",className:t.title},"Preferences"),n.createElement(G.Z,{color:"inherit",onClick:()=>m.platformDelegate.send("save-prefs",a)},n.createElement(J.Z,null)))),n.createElement($.Z,{maxWidth:"md",className:t.container},n.createElement(U.Z,{elevation:4,square:!0,className:t.paper},n.createElement(d.Z,{display:"flex",flexDirection:"column",height:"100%"},n.createElement(d.Z,{flexGrow:1},n.createElement(g.Z,{container:!0,spacing:3},n.createElement(g.Z,{item:!0,xs:12},n.createElement(ie,{label:"Display"})),n.createElement(g.Z,{item:!0,xs:12},n.createElement(ce,{value:a.textSize,onChange:e=>{o(Object.assign(Object.assign({},a),{textSize:e}))},items:[{value:8,label:"Tiny"},{value:12,label:"Small"},{value:16,label:"Default"},{value:24,label:"Large"},{value:28,label:"Huge"}],label:"Text Size"})),n.createElement(g.Z,{item:!0,xs:12},n.createElement(ce,{value:a.theme,onChange:e=>{o(Object.assign(Object.assign({},a),{theme:e}))},items:[{value:M.Q.Light,label:"Light"},{value:M.Q.Dark,label:"Dark"},{value:M.Q.System,label:"Follow System"}],label:"Theme"})),n.createElement(g.Z,{item:!0,xs:12},n.createElement(ie,{label:"Other"})),n.createElement(g.Z,{item:!0,xs:12},n.createElement(ce,{value:a.rhymeSource,onChange:e=>{o(Object.assign(Object.assign({},a),{rhymeSource:e}))},items:[{value:M.O.Offline,label:"Offline (alpha)"},{value:M.O.Datamuse,label:"Datamuse"}],label:"Rhyme Source"})))),n.createElement(u.Z,{fullWidth:!1,variant:"text",startIcon:n.createElement(Q.Z,null),size:"large",onClick:()=>e.replace("/about")},"About Lyricistant"))))):n.createElement("div",null)};var me=r(9659),de=r(8222),ue=r(6847),pe=r(2302),fe=r(9613),ge=r(7394);const he=r.p+"22c1ed668abdb7caf6cdc72bbf2283d7.png",ye={Author:m.APP_AUTHOR,Version:m.APP_VERSION,Homepage:n.createElement(me.Z,{target:"_blank",rel:"noopener",href:m.APP_HOMEPAGE},"GitHub"),"Report an issue":n.createElement(me.Z,{target:"_blank",rel:"noopener",href:"https://github.com/wardellbagby/lyricistant/issues/new"},"Issues")},Ee=(0,y.Z)({root:{borderBottom:"none"}}),be=e=>{const t=Ee();return n.createElement(de.Z,Object.assign({className:t.root},e))},ve=()=>{const e=(0,s.k6)();return n.createElement(p.Z,{onClose:()=>e.replace("/"),open:!0,className:"paper"},n.createElement(T.Z,null,n.createElement(g.Z,{container:!0,spacing:1,direction:"column",justify:"center",alignItems:"center"},n.createElement(g.Z,{item:!0,xs:12},n.createElement("img",{src:he,height:"48px",alt:"Lyricistant Icon"})),n.createElement(g.Z,{item:!0,xs:12},n.createElement(h.Z,{variant:"h6"},"Lyricistant")),n.createElement(g.Z,{item:!0,xs:12},n.createElement(ue.Z,null,n.createElement(pe.Z,{size:"small"},n.createElement(fe.Z,null,Object.keys(ye).map((e=>[e,ye[e]])).map((([e,t])=>n.createElement(ge.Z,{key:e},n.createElement(be,null,e),n.createElement(be,null,t)))))))),n.createElement(d.Z,{height:"8px"}),n.createElement(g.Z,{item:!0,xs:12},n.createElement(u.Z,{variant:"outlined",onClick:()=>m.platformDelegate.send("save-logs")},"Download Logs")))))};var xe=r(4335),we=r(6008),ke=r(5709);const Ze=new V.X(null),Ce=new xe.xQ,Se={selectedWords:e=>Ze.pipe((0,we.h)((e=>e&&!!e.word)),(0,ke.U)((e=>e.word)),(0,K.x)()).subscribe(e),selectedWordPosition:e=>Ze.pipe((0,we.h)((e=>e&&!!e.word)),(0,ke.U)((e=>[e.from,e.to])),(0,K.x)()).subscribe(e),replacedWords:e=>Ce.subscribe(e),onWordSelected:e=>Ze.next(e),onWordReplaced:e=>Ce.next(e)},De=(0,n.createContext)(Se),Le=({children:e})=>n.createElement(De.Provider,{value:Se},e),Te=()=>(0,n.useContext)(De),Re=()=>{const e=Te(),[t,r]=(0,n.useState)();return(0,n.useEffect)((()=>{const t=e.replacedWords(r);return()=>t.unsubscribe()}),[e,r]),t},Oe=new V.X(null),We={editorText:e=>Oe.pipe((0,K.x)()).subscribe(e),onEditorText:e=>Oe.next(e)},Ae=(0,n.createContext)(We),Ne=({children:e})=>n.createElement(Ae.Provider,{value:We},e),Pe=()=>(0,n.useContext)(Ae),Me=()=>{const e=Pe(),[t,r]=(0,n.useState)();return(0,n.useEffect)((()=>{const t=e.editorText(r);return()=>t.unsubscribe()}),[e,r]),t};var je=r(655),_e=r(8238),Fe=r(4405),Ie=r(5541),Be=r(9203),ze=r(8895),$e=r(1911),Ue=r(8920),qe=(r(2762),r(3427));const Ge=e=>Be.tk.theme({"&.cm-editor":{height:"100%",width:"100%",backgroundColor:e.palette.background.default,caretColor:e.palette.text.primary},"&.cm-focused":{outline_fallback:"none",outline:"none"},".cm-line":{color:e.palette.text.primary,"&::selection":{backgroundColor:e.palette.primary.main,color:e.palette.getContrastText(e.palette.primary.main)}},".cm-scroller":{fontFamily:'"Roboto Mono"',fontSize:e.typography.fontSize},".cm-gutters":{width:"60px",justifyContent:"center",backgroundColor:e.palette.background.default,color:e.palette.text.secondary,borderRight:"none"},".cm-panel":{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper)},".cm-searchMatch":{backgroundColor:e.palette.grey.A100,color:e.palette.getContrastText(e.palette.grey.A100)},".cm-searchMatch.selected":{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},".cm-button":{background:e.palette.primary.main,color:e.palette.primary.contrastText,border:"none",borderRadius:"0px",margin:"2px",padding:"8px",width:"100px",height:"35px",textAlign:"center",textDecoration:"none",display:"inline-block",fontFamily:'"Roboto"',fontSize:e.typography.fontSize,"&:focus":{outline:"none"},"&:active":{background:e.palette.action.active}},".cm-textfield":{color:e.palette.text.primary,padding:"8px",width:"150px",height:"35px",textDecoration:"none",fontFamily:'"Roboto"',fontSize:e.typography.fontSize,"&:focus":{outline:"none"}},".cm-panel label":{display:"none",fontFamily:'"Roboto"',fontSize:e.typography.fontSize},".cm-panel.cm-search [name=select]":{display:"none"},".cm-panel.cm-search [name=close]":{fontSize:"24px",right:"8px","&:focus":{outline:"none"},color:e.palette.text.primary}},{dark:"dark"===e.palette.type});var He=r(383),Xe=r(8766),Qe=r.n(Xe);const Ye=(0,$e.Z)("div")({height:"100%",width:"calc(100% - env(safe-area-inset-left) - env(safe-area-inset-right))",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"});function Je(e){const t=(0,n.useRef)(),[r,a]=(0,n.useState)(null),o=(0,Ue.Z)(),l=(0,n.useMemo)((()=>new Fe.F6),[]),i=(0,n.useMemo)((()=>{return{extensions:[(0,He.Eu)({formatNumber:(e,t)=>e>t.doc.lines?"0":Qe()(t.doc.line(e).text).toString()}),l.of(Ge(o)),(0,ze.m8)(),(t={onWordSelected:e.onWordSelected},[Be.tk.updateListener.of((e=>{e.selectionSet&&t.onWordSelected(((e,t)=>{const r=e.lineAt(t.head),a=e=>/[^\w\-']+/.exec(e);let n,o;for(t.empty?1===t.assoc?(n=t.from-r.from,o=t.from+1-r.from):(n=t.from-1-r.from,o=t.from-r.from):(n=t.from-r.from,o=t.to-r.from);n>=0&&!a(r.text[n]);)n-=1;for(n=Math.max(0,n+1);o<r.length&&!a(r.text[o]);)o+=1;return o=Math.max(n,o),{from:n+r.from,to:o+r.from,word:r.text.substring(n,o)}})(e.state.doc,e.state.selection.asSingle().main))}))]),Be.tk.updateListener.of((t=>{(t.docChanged||t.state===t.startState)&&e.onTextChanged(t.state.doc.toString())})),Be.tk.lineWrapping,(0,Be.W$)("Type out some lyrics..."),Be.$f.of([...Ie.wQ,...ze.f$,...qe.Lp])]};var t}),[o,e.onTextChanged]);return(0,n.useEffect)((()=>{var t;i&&(null===(t=e.onDefaultConfigReady)||void 0===t||t.call(e,i))}),[e.onDefaultConfigReady,i]),(0,n.useEffect)((()=>{if(t.current){if(!r){const e=new Be.tk({parent:t.current});e.setState(Fe.yy.create(i)),a(e)}return()=>{t.current||(r.destroy(),a(null))}}}),[r,a]),(0,n.useEffect)((()=>{r&&e.onEditorMounted(r)}),[r,e.onEditorMounted]),(0,n.useEffect)((()=>{r&&r.dispatch({effects:l.reconfigure(Ge(o))})}),[r,o]),(0,n.useEffect)((()=>{if(!r||!e.wordReplacement)return;const{originalWord:{from:t,to:a},newWord:n}=e.wordReplacement,o=r.state.changes({from:Math.max(0,t),to:Math.min(a,r.state.doc.length),insert:n}),l=Fe.jT.cursor(o.mapPos(Math.min(a,r.state.doc.length)));r.dispatch({changes:o,selection:l})}),[r,e.wordReplacement,e.onWordSelected]),n.createElement(Ye,{ref:t})}const Ve=(e,t,r)=>{(0,n.useEffect)((()=>{const r=e=>t(e);return document.addEventListener(e,r),()=>document.removeEventListener(e,r)}),[t,e,...null!=r?r:[]])},Ke=()=>{const[e,t]=(0,n.useState)(null),[r,o]=(0,n.useState)(null);Ve("drop",(t=>(0,je.mG)(void 0,void 0,void 0,(function*(){var r,a;if(e&&(t.preventDefault(),t.stopPropagation(),(null===(a=null===(r=t.dataTransfer)||void 0===r?void 0:r.files)||void 0===a?void 0:a.length)>0)){m.logger.debug("Attempted to drop a file.");const r=yield(e=>(0,je.mG)(void 0,void 0,void 0,(function*(){var t;return{path:null!==(t=e.path)&&void 0!==t?t:e.name,type:e.type,data:yield e.arrayBuffer()}})))(t.dataTransfer.files.item(0));if((0,ze.of)(e.state)>0)return void m.platformDelegate.send("prompt-save-file-for-open",r);m.platformDelegate.send("open-file-attempt",r)}}))),[e]),Ve("dragover",(e=>(e.preventDefault(),!0)),[e]),(0,n.useEffect)(function(e,t){const{enqueueSnackbar:r}=(0,a.Ds)();return()=>{if(!e)return;const a=(a,n)=>{e.setState(Fe.yy.create(Object.assign(Object.assign({},t),{doc:e.state.doc}))),n&&r(`${n} saved`,{variant:"success"})};m.platformDelegate.on("file-save-ended",a);const n=()=>{0===(0,ze.of)(e.state)?m.platformDelegate.send("okay-for-new-file"):m.platformDelegate.send("prompt-save-file-for-new")};m.platformDelegate.on("is-okay-for-new-file",n);const o=()=>{0===(0,ze.of)(e.state)?m.platformDelegate.send("okay-for-quit"):m.platformDelegate.send("prompt-save-file-for-quit")};m.platformDelegate.on("is-okay-for-quit-file",o);const l=()=>{e.setState(Fe.yy.create(t))};m.platformDelegate.on("new-file-created",l);const i=(r,a,n,o)=>{r||(o?e.setState(Fe.yy.create(Object.assign(Object.assign({},t),{doc:n}))):e.dispatch({changes:{from:0,to:e.state.doc.length,insert:n}}))};m.platformDelegate.on("file-opened",i);const c=()=>{m.platformDelegate.send("editor-text",e.state.doc.toString())};m.platformDelegate.on("request-editor-text",c);const s=()=>(0,ze.Yw)(e);m.platformDelegate.on("undo",s);const d=()=>(0,ze.KX)(e);m.platformDelegate.on("redo",d);const u=()=>(0,qe.nx)(e);m.platformDelegate.on("find",u);const p=()=>(0,qe.nx)(e);return m.platformDelegate.on("replace",p),()=>{m.platformDelegate.removeListener("file-save-ended",a),m.platformDelegate.removeListener("is-okay-for-new-file",n),m.platformDelegate.removeListener("is-okay-for-quit-file",o),m.platformDelegate.removeListener("new-file-created",l),m.platformDelegate.removeListener("file-opened",i),m.platformDelegate.removeListener("request-editor-text",c),m.platformDelegate.removeListener("undo",s),m.platformDelegate.removeListener("redo",d),m.platformDelegate.removeListener("find",u),m.platformDelegate.removeListener("replace",p)}}}(e,r),[e,r]),(0,_e.x)((()=>{if(e&&0!==(0,ze.of)(e.state))return"Are you sure you want to leave? Your changes haven't been saved."}));const l=Te(),{onEditorText:i}=Pe();return n.createElement(Je,{onEditorMounted:t,onWordSelected:l.onWordSelected,wordReplacement:Re(),onDefaultConfigReady:o,onTextChanged:i})};Ke.displayName="Editor";var et=r(1742),tt=r(3457),rt=r(3829),at=r(7129),nt=r(8965),ot=r(4824),lt=r(255),it=r(9302);const ct=()=>{const e=(0,Ue.Z)();return(0,tt.Z)(e.breakpoints.down("sm"))},st=(0,y.Z)((e=>({root:{width:56,height:56,color:e.palette.action.active,flexShrink:0,display:"inline-flex"},icon:{width:24,height:24}}))),mt=(0,y.Z)((e=>({menu:{backgroundColor:e.palette.background.paper,"padding-top":"env(safe-area-inset-top)","padding-left":"env(safe-area-inset-left)","padding-right":"env(safe-area-inset-right)",height:e=>e.isSmallLayout?"fit-content":"100%",width:e=>e.isSmallLayout?"100%":"fit-content"}}))),dt=({onClick:e,ariaLabel:t,children:r})=>{const a=st(),[o]=(0,it.Z)(e,200);return n.createElement(et.Z,{className:a.root,onClick:o,"aria-label":t},n.createElement(d.Z,{display:"flex",alignItems:"center",justifyContent:"center"},n.Children.map(r,(e=>n.cloneElement(e,{className:a.icon})))))},ut=()=>{const e=(0,Ue.Z)(),t=mt({isSmallLayout:ct()}),r=(0,tt.Z)(e.breakpoints.down("sm")),[a,o]=(0,n.useState)(null),l=Me(),i=(0,s.k6)(),c=ct(),u=(0,n.useCallback)((()=>m.platformDelegate.send("save-file-attempt",l)),[l]);return(0,n.useEffect)((()=>{const e=e=>{o(e)};return m.platformDelegate.on("ui-config",e),m.platformDelegate.send("request-ui-config"),()=>{m.platformDelegate.removeListener("ui-config",e)}}),[]),n.createElement(d.Z,{marginBottom:c?"8px":"inherit",marginRight:c?"inherit":"8px",boxShadow:1},n.createElement(U.Z,{square:!0,className:t.menu,color:e.palette.primary.main},n.createElement(d.Z,{display:"flex",height:c?"auto":"100%",width:c?"100%":"auto",flexDirection:r?"row":"column"},n.createElement(dt,{ariaLabel:"New",onClick:()=>m.platformDelegate.send("new-file-attempt")},n.createElement(rt.Z,null)),(null==a?void 0:a.showOpen)&&n.createElement(dt,{ariaLabel:"Open",onClick:()=>m.platformDelegate.send("open-file-attempt")},n.createElement(at.Z,null)),n.createElement(dt,{ariaLabel:"Save",onClick:u},n.createElement(nt.Z,null)),n.createElement(d.Z,{flexGrow:"1"}),(null==a?void 0:a.showDownload)&&n.createElement(dt,{ariaLabel:"Download App",onClick:()=>{(()=>{let e=w;switch(window.navigator.platform){case"MacIntel":m.logger.info("Downloading app for Mac."),e+=k.find((e=>"Mac"===e.platform)).asset;break;case"Win32":m.logger.info("Downloading app for Windows."),e+=k.find((e=>"Windows"===e.platform)).asset;break;default:return m.logger.info(`Couldn't automatically download for platform ${window.navigator.platform}`),!1}return window.open(e,"_blank"),!0})()||i.replace("/download")}},n.createElement(ot.Z,null)),n.createElement(dt,{ariaLabel:"Open Preferences",onClick:()=>i.replace("/preferences")},n.createElement(lt.Z,null)))))};ut.displayName="Menu";var pt=r(998),ft=r(5757),gt=r(8287);var ht=r(3825),yt=r(9122),Et=r(375);class bt{constructor(e,t){this.word=e,this.score=t}static get[Symbol.for("___CTOR_ARGS___")](){return["string","number"]}}const vt=(e,t)=>(0,je.mG)(void 0,void 0,void 0,(function*(){let r;switch(t){case"perfect":r="rel_rhy";break;case"near":r="rel_nry";break;case"sounds-like":r="sl"}m.logger.debug(`Fetching ${t} rhymes for word: ${e}`);const a=yield fetch(`https://lyricistant.wardellbagby.workers.dev/words?${r}=${e}&max=25`);if(a.ok&&a.status<400){const r=yield a.text();m.logger.debug(`Response for ${t} and ${e}`,r);try{return JSON.parse(r)}catch(t){return m.logger.error("Couldn't parse rhymes response to JSON!",e,r),[]}}return m.logger.error("Failed to fetch rhymes! Returning an empty list.",e,a),[]})),xt=(e,t)=>e.map((e=>new bt(e.word,e.score+t))),wt=(0,r(9870).Ud)(new Worker(new URL(r.p+r.u(946),r.b),{name:"rhyme-generator"})),kt=(0,yt.C)({id:"rhymes",initial:"inactive",context:{rhymes:[]},on:{INPUT:[{target:".loading",cond:(e,t)=>e.input!==t.input||e.rhymeSource!==t.rhymeSource,actions:(0,Et.f0)({input:(e,t)=>t.input,rhymeSource:(e,t)=>t.rhymeSource})}]},states:{inactive:{},loading:{initial:"debouncing",states:{debouncing:{after:{400:"active"}},active:{invoke:{id:"fetch-rhymes",src:e=>(0,je.mG)(void 0,void 0,void 0,(function*(){return t=e.input,r=e.rhymeSource,(0,je.mG)(void 0,void 0,void 0,(function*(){let e;switch(r){case M.O.Offline:e=yield wt.generateRhymes(t);break;case M.O.Datamuse:e=yield(a=t,(0,je.mG)(void 0,void 0,void 0,(function*(){return 0===a.length?[]:Promise.all([vt(a,"perfect").then((e=>xt(e,1e4))),vt(a,"near").then((e=>xt(e,1e3))),vt(a,"sounds-like")]).then((e=>{return[...new Set((t=e,t.reduce(((e,t)=>e.concat(t)))))].sort(((e,t)=>t.score-e.score));var t}))})))}var a;return e.filter((e=>e&&e.word&&e.score))}));var t,r})),onDone:[{target:"#displaying",cond:(e,t)=>Array.isArray(t.data)&&t.data.length>0,actions:(0,Et.f0)({rhymes:(e,t)=>t.data})},{target:"#no-results",actions:(0,Et.f0)({rhymes:(e,t)=>t.data})}],onError:{target:"#error",actions:(0,Et.f0)({error:(e,t)=>t.data})}}}}},displaying:{id:"displaying"},"no-results":{id:"no-results"},error:{id:"error"}}}),Zt=(0,y.Z)((e=>({root:{color:e.palette.text.disabled,"&:hover":{color:e.palette.text.primary}},rhyme:{"text-align":"center","&:hover":{background:e.palette.background.paper}},itemContainer:{display:"flex",flex:"none","align-content":"stretch",[e.breakpoints.up("xs")]:{width:"50%",height:"50px"},[e.breakpoints.up("md")]:{width:"100%",height:"80px"},[e.breakpoints.up("lg")]:{width:"50%"}},listContainer:{display:"flex",flexWrap:"wrap",height:"100%",width:"100%"}}))),Ct=({rhymes:e,onRhymeClicked:t})=>{const r=Zt(),a=(0,n.useMemo)((()=>e=>n.createElement("div",Object.assign({},e,{className:r.itemContainer}))),[r.itemContainer]),o=(0,n.useMemo)((()=>n.forwardRef(((e,t)=>n.createElement("div",Object.assign({},e,{className:r.listContainer,ref:t}))))),[r.listContainer]);return n.createElement(gt.Mr,{components:{Item:a,List:o},style:{width:"100%",height:"100%"},overscan:20,totalCount:e.length,listClassName:r.root,itemContent:a=>{const o=e[a];if(o)return function(e,t,r){var a,o;return n.createElement(d.Z,{flex:1,width:"100%",height:"100%",onClick:r},n.createElement(pt.Z,{className:t,button:!0,key:null!==(a=e.word)&&void 0!==a?a:"",style:{height:"100%"}},n.createElement(ft.Z,{primary:null!==(o=e.word)&&void 0!==o?o:"",primaryTypographyProps:{align:"center"},secondary:false})))}(o,r.rhyme,(()=>{t(o)}))}})},St=(0,y.Z)((e=>({root:{visibility:({display:e})=>e?"visible":"hidden"},progressBarColor:{backgroundColor:e.palette.text.secondary},progressBarBackground:{backgroundColor:e.palette.background.default}}))),Dt=e=>{const t=St(e);return n.createElement(W.Z,{className:t.root,classes:{colorPrimary:t.progressBarBackground,barColorPrimary:t.progressBarColor}})},Lt=(0,y.Z)((e=>({root:{color:e.palette.text.disabled}}))),Tt=({text:e})=>{const t=Lt();return n.createElement(d.Z,{height:"100%",width:"100%",overflow:"hidden",textOverflow:"ellipsis",p:"16px",display:"flex",alignItems:"center",justifyContent:"center"},n.createElement(h.Z,{className:t.root,variant:"body1"},e))},Rt=()=>{const[e,t]=(0,ht.eO)(kt),r=Te(),a=(0,i.useErrorHandler)(),o=(()=>{const e=Te(),[t,r]=(0,n.useState)();return(0,n.useEffect)((()=>{const t=e.selectedWords(r);return()=>t.unsubscribe()}),[e,r]),t})(),l=(()=>{const e=Te(),[t,r]=(0,n.useState)();return(0,n.useEffect)((()=>{const t=e.selectedWordPosition(r);return()=>t.unsubscribe()}),[e,r]),t})(),c=ne();(0,n.useLayoutEffect)((()=>{o&&c&&t({type:"INPUT",input:o,rhymeSource:c.rhymeSource})}),[o,c]),(0,n.useEffect)((()=>{e.matches("error")&&a(e.context.error)}),[a,e]);const s=e.context.rhymes;return n.createElement(d.Z,{display:"flex",flexDirection:"column"},n.createElement(Dt,{display:e.matches("loading")}),e.matches("inactive")&&n.createElement(Tt,{text:"Waiting for lyrics..."}),e.matches("no-results")&&n.createElement(Tt,{text:"No rhymes found"}),s.length>0&&n.createElement(Ct,{rhymes:s,onRhymeClicked:e=>r.onWordReplaced({originalWord:{word:o,from:l[0],to:l[1]},newWord:e.word})}))};Rt.displayName="Rhymes";const Ot=(0,y.Z)((e=>({divider:{background:e.palette.background.paper}}))),Wt=({main:e,detail:t,menu:r})=>{const a=Ot(),o=ct();let l;return l=o?[n.createElement(n.Fragment,{key:"menu"},r),n.createElement("div",{key:"menu-main-divider"}),n.createElement(n.Fragment,{key:"main"},e),n.createElement("div",{key:"main-detail-divider",className:a.divider}),n.createElement(n.Fragment,{key:"detail"},t)]:[n.createElement(n.Fragment,{key:"menu"},r),n.createElement(n.Fragment,{key:"main"},e),n.createElement(n.Fragment,{key:"detail"},t)],(0,n.useEffect)((()=>m.logger.info(`Switching layout. isSmallLayout: ${o}`)),[o]),n.createElement(d.Z,{height:"100%",width:"100%",display:"grid",m:0,p:0,overflow:"hidden",gridTemplateRows:At(o),gridTemplateColumns:Nt(o)},l)},At=e=>e?"auto 8px minmax(200px, 1fr) 4px minmax(20%, 40%)":"100%",Nt=e=>e?"100%":"auto minmax(200px, 1fr) minmax(25%, auto)";function Pt(){const e=(0,s.k6)(),{enqueueSnackbar:t}=(0,a.Ds)();return A("file-opened",((e,r)=>{e&&t(`Couldn't open ${null!=r?r:"selected file."}`,{variant:"error"})})),A("app-title-changed",(e=>document.title=e)),A("close-prefs",(()=>e.replace("/"))),A("open-about",(()=>e.replace("/about"))),n.createElement(Ne,null,n.createElement(ae,null,n.createElement(Le,null,n.createElement(Wt,{menu:n.createElement(ut,null),main:n.createElement(Ke,null),detail:n.createElement(Rt,null)}))))}var Mt=r(9359);const jt=Mt.tq||Mt.w1,_t=({onContinue:e,open:t})=>n.createElement(p.Z,{open:t},n.createElement(f.Z,null,"Unsupported Browser"),n.createElement(T.Z,null,n.createElement(R.Z,null,"Lyricistant doesn't currently support your browser. You might experience some bugs or performance issues. ",Mt.tq?"Try switching to a desktop browser.":Mt.w1?"Try switching to a more modern browser.":void 0)),n.createElement(O.Z,null,n.createElement(u.Z,{key:"no",onClick:()=>window.history.back(),color:"primary"},"Go Back"),n.createElement(u.Z,{key:"yes",onClick:e,color:"primary"},"Continue")));var Ft=r(5834),It=r(1579),Bt=(r(9757),r(2725),r(2504),r(7279),r(4646));function zt({error:e}){const t=(0,n.useCallback)((()=>window.location.reload()),[]),r=(0,n.useCallback)((()=>window.navigator.clipboard.writeText(a)),[]),a=Me();return(0,n.useEffect)((()=>{m.logger.error("Error in renderer",e)}),[e]),n.createElement(p.Z,{onClose:t,open:!0},n.createElement(f.Z,null,"Application Error"),n.createElement(d.Z,{paddingLeft:"32px",paddingRight:"32px",paddingBottom:"24px"},n.createElement(h.Z,{paragraph:!0},"Sorry, an error has occurred in Lyricistant. Please reload the page to continue. You can copy your current lyrics to the clipboard."),n.createElement(me.Z,{href:"https://github.com/wardellbagby/lyricistant/issues/new",rel:"noopener",variant:"body1"},"Click here to report an issue."),false),n.createElement(O.Z,null,n.createElement(u.Z,{variant:"contained",onClick:r},"Copy"),n.createElement(u.Z,{variant:"contained",onClick:t},"Reload")))}r(7343),window.onerror=(e,t,r,a,n)=>{m.logger||console.error(e,t,r,a,n),m.logger.error(JSON.stringify(e)+"\n",`Url: ${t}\n`,`Line: ${r}\n`,`Column: ${a}\n`,n)},(()=>{{window.goatcounter={path:e=>"file:"===location.protocol?"electron":location.host+e,allow_local:!0};const e=document.createElement("script");e.setAttribute("src","https://gc.zgo.at/count.js"),e.setAttribute("async","true"),e.setAttribute("data-goatcounter","https://lyricistant.goatcounter.com/count")}})();const $t=document.getElementById("app");o.render(n.createElement((({children:e})=>((0,n.useEffect)((()=>m.platformDelegate.send("ready-for-events")),[]),n.createElement(n.Fragment,null,e))),null,n.createElement((({onThemeChanged:e,children:t})=>{const[r,a]=(0,n.useState)((0,Bt.j)(null,!0));return(0,n.useEffect)((()=>e(r.palette.background.default,r.palette.getContrastText(r.palette.background.default))),[r,e]),A("dark-mode-toggled",((e,t)=>{const r=(0,Bt.j)(e,t);a(r)}),[a]),n.createElement(Ft.ZP,null,n.createElement(It.Z,{theme:r},t))}),{onThemeChanged:(e,t)=>{document.body.style.backgroundColor=e,document.body.style.color=t,(0,c.i)(e)}},n.createElement(a.wT,{maxSnack:3,anchorOrigin:{vertical:"bottom",horizontal:"right"}},n.createElement(l.UT,{hashType:"noslash"},n.createElement(i.ErrorBoundary,{fallbackRender:({error:e})=>n.createElement(zt,{error:e})},n.createElement((function({children:e}){const[t,r]=(0,n.useState)(!1),a=jt&&!t;return n.createElement(n.Fragment,null,n.createElement(_t,{open:a,onContinue:()=>r(!0)}),e)}),null,n.createElement((function(){const e=(0,s.TH)();return(0,n.useEffect)((()=>{m.logger.verbose("Navigation",e.pathname)}),[e]),n.createElement(n.Fragment,null,n.createElement(Pt,null),n.createElement(s.rs,null,n.createElement(s.AW,{path:"/download",component:D}),n.createElement(s.AW,{path:"/preferences",component:se}),n.createElement(s.AW,{path:"/about",component:ve}),n.createElement(s.AW,{render:()=>n.createElement(s.l_,{to:"/"})})),n.createElement(N,null))}),null))))))),$t,(()=>{(0,c.l)(),$t.style.opacity="100%"}))},4874:(e,t,r)=>{"use strict";r.d(t,{l:()=>p,i:()=>f});var a=r(4646),n=r(4013),o=r(2942);n.ZP.use((0,o.Z)());const l=(0,a.X)(!0),i={dot:{display:"inline-block",backgroundColor:l.primary,width:"30px",height:"30px",margin:"10px",borderRadius:"100%",animation:"$animation 1.2s 0s infinite linear",animationFillMode:"both"},dotOffset:{display:"inline-block",backgroundColor:l.primary,width:"30px",height:"30px",margin:"10px",borderRadius:"100%",animation:"$animation 1.2s .60s infinite linear",animationFillMode:"both"},"@keyframes animation":{"50%":{transform:"scale(.75); opacity: .2"},"100%":{transform:"scale(1); opacity: 1"}}},c={overlay:{opacity:1,backgroundColor:l.background,color:l.primaryText,transition:"opacity 500ms linear, background-color 500ms;",height:"100%",width:"100%",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row",position:"fixed",overscrollBehavior:"none",zIndex:"999"}},{classes:{dot:s,dotOffset:m}}=n.ZP.createStyleSheet(i).attach(),{classes:{overlay:d}}=n.ZP.createStyleSheet(c).attach();let u=document.getElementById("preload-overlay");u||(u=document.createElement("div"),u.className=d,u.id="preload-overlay",document.body.append(u),[0,0,0].forEach(((e,t)=>{const r=document.createElement("div");r.className=t%2?s:m,u.append(r)})));const p=()=>{u.style.opacity="0",setTimeout((()=>{u.remove(),u=null}),500)},f=e=>{u&&(u.style.backgroundColor=e)}},4646:(e,t,r)=>{"use strict";r.d(t,{X:()=>o,j:()=>l});var a=r(9506),n=r(8129);const o=e=>e?c:i,l=(e,t)=>{const r=o(t);return(0,a.Z)((0,n.Z)({palette:{type:t?"dark":"light",action:{hover:r.primary,hoverOpacity:0},primary:{main:r.primary},background:{default:r.background,paper:r.surface},text:{primary:r.primaryText,secondary:r.secondaryText}},typography:e?{fontSize:e}:void 0}))},i={primary:"#00796b",background:"#fafafa",surface:"#E0E0E0",primaryText:"#212121",secondaryText:"#424242"},c={primary:"#4db6ac",background:"#141414",surface:"#232323",primaryText:"#f8f8f8",secondaryText:"#bdbdbd"}}}]);
//# sourceMappingURL=594.renderer.js.map